<f:layout name="Loggedin"/>

<f:section name="Main">
    <nav class="navbar navbar-default searchform d-print-none d-none d-lg-table">
        <div class="col-xl-12 col-lg-12 col-md-12 col-sm-12 pull-left">
            <h1>Ihr Nutzerprofil</h1>
        </div>
    </nav>
    <div class="container-fluid content">
        <div class="row">
            <div class="col-xl-12">

                <h3>Ihre persönlichen Daten</h3>
                <hr/>

                <f:format.raw>{error}</f:format.raw>

                <f:if condition="{userlevel} > {APPLICATION_USERLEVEL_GUEST}">
                    <form method="post" id="updateform" action="/Frontend/" enctype="multipart/form-data">
                        <input type="hidden" name="ctrl" value="Profile"/>
                        <input type="hidden" name="action" value="Profile"/>
                        <input type="hidden" name="save" value="true"/>
                        <div class="row submitrow">
                            <div class="col text-right">
                                <button type="submit" class="btn btn-primary">Speichern</button>
                            </div>
                        </div>
                        <f:render partial="Profile/FormFields" arguments="{_all}"/>
                    </form>

                    <h3 class="mt-5">API-Schlüssel</h3>
                    <hr/>
                    <div class="row">
                        <div class="col-xl-9 col-lg-10 col-md-12 col-sm-12 col-12">
                            <div class="alert alert-success">
                                <p>Ihr derzeitiger persönlicher API Schlüssel lautet <strong>{api_key}</strong></p>
                                <button type="button" class="btn btn-success mt-2" onclick="getApiKeyFile('{api_key}','sachkundetrainer-api-key.txt', 'text');">Download</button>
                                <a href="?ctrl=Profile&action=CreateApikey" class="btn btn-danger confirm mt-2" confirmation-message="Wirklich einen neuen Schlüssel erzeugen? Der alte Schlüssel wird ungültig!">Schlüssel neu erzeugen</a>
                            </div>
                        </div>
                    </div>
                </f:if>

            </div>
        </div>
    </div>
</f:section>